CREATE TABLE "mytable" (
  "------------------Uzupełnienie danych-------------------" text
);

INSERT INTO "mytable" ("------------------Uzupełnienie danych-------------------")
VALUES
('-- A) Dużo sesji: np. 365 dni x 6 slotów dziennie x 5 torów ≈ 10–11k sesji'),
('WITH days AS ('),
('SELECT generate_series('),
('date_trunc(''day'''),
('date_trunc(''day'''),
('interval ''1 day'') AS d'),
(')'),
('slots AS ('),
('SELECT d.d + (s*interval ''2 hour'') AS starts_at'),
('FROM days d'),
(')'),
('fields AS ('),
('SELECT field_id FROM archery.training_fields'),
(')'),
('INSERT INTO archery.sessions (field_id'),
('SELECT f.field_id'),
('FROM fields f CROSS JOIN slots s'),
('ON CONFLICT DO NOTHING;'),
('-- B) Więcej rezerwacji: np. +200k'),
('WITH m AS (SELECT member_id FROM archery.club_members)'),
('s AS (SELECT session_id FROM archery.sessions ORDER BY random() LIMIT 20000)'),
('INSERT INTO archery.bookings (member_id'),
('SELECT'),
('(SELECT member_id FROM m ORDER BY random() LIMIT 1)'),
('CASE WHEN random()<0.8 THEN (SELECT session_id FROM s ORDER BY random() LIMIT 1) ELSE NULL END'),
('CASE WHEN random()<0.5 THEN (SELECT field_id FROM archery.training_fields ORDER BY random() LIMIT 1) ELSE NULL END'),
('(SELECT status_id FROM archery.reservation_statuses ORDER BY random() LIMIT 1)'),
('now() - ((random()*60)::int || '' days'')::interval'),
('FROM generate_series(1'),
('-- C) Pozycje sprzętu ~70% bookingów × 1–3 łuki'),
('INSERT INTO archery.booking_equipment (booking_id'),
('SELECT b.booking_id'),
('FROM archery.bookings b'),
('JOIN LATERAL ('),
('SELECT bow_id FROM archery.equipment ORDER BY random() LIMIT (1 + (random()*2)::int)'),
(') e ON TRUE'),
('WHERE random() < 0.7'),
('ON CONFLICT DO NOTHING;'),
('-- D) Płatności (~65% bookingów'),
('INSERT INTO archery.payments (booking_id'),
('SELECT b.booking_id'),
('round((20 + random()*180)::numeric'),
('b.requested_at + ((random()*10)::int || '' days'')::interval'),
('(SELECT method_id   FROM archery.payment_methods   ORDER BY random() LIMIT 1)'),
('1'),
('(SELECT status_id   FROM archery.payment_statuses  ORDER BY random() LIMIT 1)'),
('FROM archery.bookings b'),
('WHERE random() < 0.65;'),
('INSERT INTO archery.payments (booking_id'),
('SELECT b.booking_id'),
('round((10 + random()*50)::numeric'),
('b.requested_at + ((random()*15)::int || '' days'')::interval'),
('(SELECT method_id   FROM archery.payment_methods   ORDER BY random() LIMIT 1)'),
('1'),
('(SELECT status_id   FROM archery.payment_statuses  ORDER BY random() LIMIT 1)'),
('FROM archery.bookings b'),
('WHERE random() < 0.10;');
